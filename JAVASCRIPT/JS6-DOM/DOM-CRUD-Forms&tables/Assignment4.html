<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div#Chinnoda {
            border: 2px solid;
            width: 350px;            
            margin: 0 auto;
        }

        h4 {
            text-align: center;
        }

        form {
            margin: 10px;
        }

        input[type="text"] {
            width: 321px;
        }

        input[type="email"] {
            width: 321px;
        }

        input[type="password"] {
            width: 321px;
        }
        body {
    background-color: bisque;
}

        button {
            /* width: 321px; */
            background-color: cornflowerblue;
            border-color: aliceblue;
        }

        textarea {
            width: 321px;
            height: 30px;
        }
        table {
            margin: 0 auto;
    margin-top: 15px;
}
td{
    color: red;

    background-color: aqua;
}


th{
    color: blue;
    background-color: yellow;
}
    </style>
</head>

<body>

    <div id="Chinnoda">
        <h4><Strong>Bootstrap 4 Form Validation Demo</Strong></h4>
        <form action="">
            <label for="Name">Name</label><br><br>
            <input type="text" name="" id="Name" placeholder="Name" onkeyup="validate()"><br><br>

            <label for=""></label>UserName<br>
            <input type="text" name="" id="UserName" placeholder="Username" onkeyup="validate()"><br><br>

            <label for="">Email</label><br>
            <input type="email" name="" id="Email" placeholder="Email" onkeyup="validate()" ><br><br>

            <label for="">Password</label><br>
            <input type="password" name="" id="Password" placeholder="password"  onkeyup="validate()"><br><br>

            <label for="">Confirm Password</label><br>
            <input type="email" name="" id="ConfirmPassword" placeholder="Confirm Password"  onkeyup="validate()"><br><br>

            <label for="">Message</label><br>
            <textarea name="" id="Message" cols="30" rows="10"  onkeyup="validate()"></textarea>

            <button type="button" id="Raju" onclick="DisplayUser()" disabled >Send</button>
            <button type="button" id="updateuser" onclick="updateusers()" style="display: none" >updateuser</button>


        </form>
    </div>
    <table border="1" style="width: 50%">
        <thead>
           <tr>
            <th>Name</th>
            <th>UserName</th>
            <th>Email</th>
            <th>Password</th>
            <th>Confirm Password</th>
            <th>Message</th>
            <th>Edit</th>
            <th>Delete</th>
           </tr>
        </thead>
        <tbody>

        </tbody>
    </table><br><br>

    <script>
        allUsers=JSON.parse(localStorage.getItem("allUsers"))
        var index = null
            if(allUsers==null){
                allUsers=[]
            }
        
        function DisplayUser() {
            var users = {
                Name: document.getElementById("Name").value,
                UserName: document.getElementById("UserName").value,
                Email: document.getElementById("Email").value,
                Password: document.getElementById("Password").value,
                ConfirmPassword: document.getElementById("ConfirmPassword").value,
                Message: document.getElementById("Message").value
            }
            allUsers.push(users)
            console.log(users)
            document.getElementById("Raju").setAttribute("disabled",true)
            displayusers()
            Clearform(users)
            localStorage.setItem("allUsers",JSON.stringify(allUsers))
        }

        function Clearform(users){
            for(a in users){
                document.getElementById(a).value=""
            }
        }

        function displayusers() {
            document.querySelector('tbody').innerHTML=""
            allUsers.forEach((users,i)=>{
                var mytr=document.createElement('tr')
                document.querySelector('tbody').appendChild(mytr)

                for(a in users){
                    var mytd=document.createElement('td')
                    mytr.appendChild(mytd)
                    mytd.innerHTML=users[a]
                }
                var editTd=document.createElement('td')
                var editBtn=document.createElement('button')
                mytr.appendChild(editTd)
                editTd.appendChild(editBtn)
                editBtn.innerHTML='Edit'
                editBtn.setAttribute("onclick","EditUser("+i+")")

                var DeleteTd=document.createElement('td')
                var DeleteBtn=document.createElement('button')
                mytr.appendChild(DeleteTd)
                DeleteTd.appendChild(DeleteBtn)
                DeleteBtn.innerHTML='Delete'
                DeleteBtn.setAttribute("onclick","DeleteUser("+i+")")
            })
        }
        

        function EditUser(i){
            console.log(allUsers[i])
            index = i
            document.getElementById("Name").value = allUsers[i].Name
            document.getElementById("UserName").value = allUsers[i].UserName
            document.getElementById("Email").value = allUsers[i].Email
            document.getElementById("Password").value = allUsers[i].Password
            document.getElementById("ConfirmPassword").value = allUsers[i].ConfirmPassword
            document.getElementById("Message").value = allUsers[i].Message
            document.getElementById("Raju").style.display="none"
            document.getElementById("updateuser").style.display="block"

        }
        function DeleteUser(i){
            // console.log("delete user Called"+i)
            allUsers.splice(i,1)
            displayusers()

        }
        displayusers()

        function validate(){
            var users = {
                Name: document.getElementById("Name").value,
                UserName: document.getElementById("UserName").value,
                Email: document.getElementById("Email").value,
                Password: document.getElementById("Password").value,
                ConfirmPassword: document.getElementById("ConfirmPassword").value,
                Message: document.getElementById("Message").value
            }
            var cheak=false;
            for(a in users){
                if(users[a]== ""){
                    cheak=true
                }
            }
            if(cheak==true){
                document.getElementById("Raju").setAttribute("disabled",true)
            }else{
                document.getElementById("Raju").removeAttribute("disabled")
            }
        }
        function updateusers(){
            console.log("Update user called")

            var users = {
                Name: document.getElementById("Name").value,
                UserName: document.getElementById("UserName").value,
                Email: document.getElementById("Email").value,
                Password: document.getElementById("Password").value,
                ConfirmPassword: document.getElementById("ConfirmPassword").value,
                Message: document.getElementById("Message").value
            }
            allUsers[index] = users

            displayusers()
            Clearform(users)
            localStorage.setItem("allUsers",JSON.stringify(allUsers))

            document.getElementById("Raju").style.display="block"
            document.getElementById("updateuser").style.display="none"

        }
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
    background: #e4b20d;
    color: white;
}
    </style>
</head>
<body>
    <form action="">
        <fieldset>
            <legend>Registration Details</legend>
            <label for="">University : </label>
            <input type="text" id="univer" onkeyup="validate()"><br><br>
            <label for="">Institute : </label>
            <input type="text" id="institute"  onkeyup="validate()"><br><br>
            <label for="">Branch : </label>
            <input type="text" id="branch"  onkeyup="validate()"><br><br>
            <label for="">Degree : </label>
            <input type="text" id="degree"  onkeyup="validate()">
            <input type="radio">Pursuing
            <input type="radio">Completed <br><br>
            <label for="">Average CPI : </label>
            <input type="number" id="avg"  onkeyup="validate()">
            <label for="">UPto : </label>
            <input type="number" id="up"  onkeyup="validate()">the semester <br><br>
            <label for="">Experience : </label>
            <input type="number" id="exp"  onkeyup="validate()">Years<br><br>
            <label for="">Your Website Or Blog : </label>
            <input type="text" id="blog"  onkeyup="validate()">
        </fieldset>
        <button type="button" id="adduser" onclick="getdata()" disabled>ok</button>
        <button type="button" id="updateuser" onclick="update()" style="display: none;">update</button>
    </form>
    <table border="1">
        <tr>
            <thead>
                <th>University</th>
                <th>Institute</th>
                <th>Branch</th>
                <th>Degree</th>
                <th>Average CPI</th>
                <th>UPto</th>
                <th>Experience</th>
                <th>Your Website Or Blog</th>
                <th>Edit</th>
                <th>Delete</th>
            </thead>
        </tr>
    </table>
    <script>
         var alluser=JSON.parse(localStorage.getItem("alluser"))
         var index=null
        if(alluser==null){
            alluser=[]
        }
        function  getdata(){
            var data={
                University:document.getElementById("univer").value,
                Institute:document.getElementById("institute").value,
                Branch:document.getElementById("branch").value,
                Degree:document.getElementById("degree").value,
                Average:document.getElementById("avg").value, 
                UPto:document.getElementById("up").value,
                Experience:document.getElementById("exp").value,
                YourWebsite :document.getElementById("blog").value,  
            }
            alluser.push(data)
             localStorage.setItem("alluser",JSON.stringify(alluser))
             console.log(data)
             console.log(alluser)
             displayuser(alluser)
             clear()
       }
       function clear(){
            document.getElementById("univer").value="";
            document.getElementById("institute").value="";
            document.getElementById("branch").value="";
            document.getElementById("degree").value="";
            document.getElementById("avg").value="";
            document.getElementById("up").value="";
            document.getElementById("exp").value="";
            document.getElementById("blog").value="";
       }
       function displayuser(){
           document.querySelector("tbody").innerHTML="";
           alluser.forEach((use,i)=>{
              var mytr=document.createElement("tr")
               for(a in use){
                     var mytd=document.createElement("td")
                     mytd.innerHTML=use[a]
                     mytr.appendChild(mytd)
               }
               var edittd=document.createElement("td")
                  var editbtn=document.createElement("button")
                  editbtn.setAttribute("onclick","editUser("+i+")")
                  editbtn.innerHTML="edit"
                  edittd.appendChild(editbtn)
                  mytr.appendChild(edittd)

                  var deletetd=document.createElement("td")
                  var deletebtn=document.createElement("button")
                  deletebtn.setAttribute("onclick","deleteUser("+i+")")
                  deletebtn.innerHTML="delete"
                  deletetd.appendChild(deletebtn)
                  mytr.appendChild(deletetd)
               document.querySelector("tbody").appendChild(mytr)
           })
       }
       function editUser(i){
           console.log("editUsercalled"+alluser[i])
           index=i
           document.getElementById("univer").value=alluser[i].University
           document.getElementById("institute").valu=alluser[i].Institute
           document.getElementById("branch").value=alluser[i].Branch
           document.getElementById("degree").value=alluser[i].Degree
           document.getElementById("avg").valu=alluser[i].Average
           document.getElementById("up").value=alluser[i].UPto
           document.getElementById("exp").value=alluser[i].Experience
           document.getElementById("blog").value=alluser[i].YourWebsite
           document.getElementById("adduser").style.display="none"
          document.getElementById("updateuser").style.display="block"

           
           


  }
  function deleteUser(i){
    alluser.splice(i,1)
    displayuser(alluser)
  } 
       displayuser(alluser)

       function  validate(){
            var data={
                University:document.getElementById("univer").value,
                Institute:document.getElementById("institute").value,
                Branch:document.getElementById("branch").value,
                Degree:document.getElementById("degree").value,
                Average:document.getElementById("avg").value, 
                UPto:document.getElementById("up").value,
                Experience:document.getElementById("exp").value,
                YourWebsite :document.getElementById("blog").value,  
            }
            var check=false;
            for(a in data){
                if(data[a]==""){
                    check=true
                }
            }
            if(check==true){
                document.getElementById("adduser").setAttribute("disabled",true);

            }else{
                document.getElementById("adduser").removeAttribute("disabled");
            }
        }
       function update(){
        var data={
                University:document.getElementById("univer").value,
                Institute:document.getElementById("institute").value,
                Branch:document.getElementById("branch").value,
                Degree:document.getElementById("degree").value,
                Average:document.getElementById("avg").value, 
                UPto:document.getElementById("up").value,
                Experience:document.getElementById("exp").value,
                YourWebsite :document.getElementById("blog").value,  
            }
            alluser[index]=data
        localStorage.setItem("alluser",JSON.stringify(alluser))
        displayuser(alluser)
     clear()
     document.getElementById("adduser").style.display="block"
          document.getElementById("updateuser").style.display="none"
    }
       
        </script>  
</body>
</html>
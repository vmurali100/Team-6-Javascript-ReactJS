<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>     

        .mydiv {
            border: 2px solid;
            width: 310px;
            margin-left: 500px;
            background-color: whitesmoke;
        }

        form {
            margin: 10px;
        }

        th {
            background-color: rgb(0, 255, 21);
        }

        td {
            color: blue;
            background-color: lightblue;
            text-align: center;
        }
        table{
            width: 100%;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    
        <div class="mydiv">
            <form action="">
                <label for="Username">User Name</label><br>
                <input type="text" name="" placeholder="Username" id="username" onkeyup="validate()"> <br><br>

                <label for="Password">Password</label><br>
                <input type="text" placeholder="Password" name="" id="password" onkeyup="validate()"> <br><br>

                <label for="">Email Address</label><br>
                <input type="text" placeholder="Email Address" name="" id="emailaddress" onkeyup="validate()"><br><br>
               
                <select name="" id="myname">
                    <option value="">I am a Girl</option>
                    <option value="">I am a Man</option>
                </select><br><br>

                <select name="" id="gender">
                    <option value="">I Want to Find Women</option>
                    <option value="">I Want to Find Men</option>
                </select><br><br>

                <label for="Date of birth"><b>Date of birth</b></label><br>
                <select name="" id="year" onkeyup="validate()">
                    <option value="Year">Year</option>
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                    <option value="2018">2018</option>
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                </select>

                <select name="" id="month" onkeyup="validate()">
                    <option value="MONTH">MONTH</option>
                    <option value="Jan">Jan</option>
                    <option value="Feb">Feb</option>
                    <option value="Mar">Mar</option>
                    <option value="Apr">Apr</option>
                    <option value="May">May</option>
                    <option value="Jun">Jun</option>
                    <option value="July">July</option>
                    <option value="Aug">Aug</option>
                    <option value="Sep">Sep</option>
                    <option value="Oct">Oct</option>
                    <option value="Nov">Nov</option>
                    <option value="Dec">Dec</option>
                </select>

                <select name="" id="dob" onkeyup="validate()">
                </select><br><br>                

                <label for="heightweight"><b>Height / Weight</b></label><br>

                <select name="" id="height" onkeyup="validate()">
                    <option value="Height">Height</option>
                    <option value="4.0m">4.0m</option>
                    <option value="4.2m">4.2m</option>
                    <option value="4.4m">4.4m</option>
                    <option value="4.6m">4.6m</option>
                    <option value="5.2m">5.2m</option>
                    <option value="5.3m">5.3m</option>
                    <option value="5.4m">5.4m</option>
                    <option value="5.6m">5.6m</option>
                    <option value="5.8m">5.8m</option>
                    <option value="6.0m">6.0m</option>
                    <option value="6.2m">6.2m</option>
                </select>

                <select name="" id="weight" onkeyup="validate()">
                    <option value="Weight">Weight</option>
                    <option value="20kg">20kg</option>
                    <option value="30kg">30kg</option>
                    <option value="40kg">40kg</option>
                    <option value="50kg">50kg</option>
                    <option value="60kg">60kg</option>
                </select><br><br>

                <button type="button" onclick="pressenter()" id="userEnter" disabled>Enter</button>
                <button type="button" onclick="updateUser()" id="userUpdate" style="display: none;">Update User</button>

            </form>
        </div>
        <hr>
    
    <table border="1">
        <tr>
            <thead>
                <th>User Name</th>
                <th>Password</th>
                <th>Email Address</th>
                <th>Date Of Birth</th>
                <th>Height/Weight</th>
                <th>Edit</th>
                <th>Delete</th>
            </thead>
        </tr>
        <tbody></tbody>
    </table>
    <script>

        let i = 1;
        while  (i < 31){            
        var opt = document.createElement("option")
        opt.innerHTML = i;
        opt.setAttribute("value",i);
        document.getElementById("dob").appendChild(opt)
        i++
        }

        var allusers = JSON.parse(localStorage.getItem("allusers"))
        if (allusers == null) {
            allusers = []
        }

        function pressenter() {
            var user = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                emailaddress: document.getElementById("emailaddress").value,                
            }
                var dateofbirth = document.getElementById("dob").value; 
                var month = document.getElementById("month").value;        
                var year = document.getElementById("year").value;            
                
                user.dob = dateofbirth + "/" + month + "/" + year

                var height = document.getElementById("height").value;
                var weight = document.getElementById("weight").value;
                user.heightweight = height + "/" + weight

                allusers.push(user);
                var index = null
                document.getElementById("userEnter").setAttribute("disabled", true);
                localStorage.setItem("allusers", JSON.stringify(allusers))
                // console.log(users)
                // console.log(allusers)
                displayusers(allusers);
                clearForm();
        }

        function clearForm() {
            document.getElementById("username").value = "";
            document.getElementById("password").value = "";
            document.getElementById("emailaddress").value = "";
            document.getElementById("dob").value = "";
            document.getElementById("month").value = "";
            document.getElementById("year").value = "";
            document.getElementById("height").value = "";
            document.getElementById("weight").value = "";

        }
            function displayusers(data){
                document.querySelector("tbody").innerHTML =""
                data.forEach((user, i) => {
                    var myTr = document.createElement("tr");
                    for (a in user){
                        var myTd = document.createElement("td");
                        myTd.innerHTML = user[a];
                        myTr.appendChild(myTd);
                    }
                    var editTd = document.createElement("td");
                    var editBit = document.createElement("button");
                    editBit.setAttribute("onclick", "editUser("+i+")");
                    editBit.innerHTML = "Edit";
                    editTd.appendChild(editBit);
                    myTr.appendChild(editTd);
    
                    var deleteTd = document.createElement("td");
                    var deleteBit= document.createElement("button");
                    deleteBit.setAttribute("onclick","deleteUser("+i+")");
                    deleteBit.innerHTML = "Delete";
                    deleteTd.appendChild(deleteBit);
                    myTr.appendChild(deleteTd);
                    document.querySelector("tbody").appendChild(myTr)                
                });                
            }
        function editUser(i) {
            //console.log("edit user called" + i)
            console.log(allusers[i])
            index = i
            document.getElementById("username").value = allusers[i].username
            document.getElementById("password").value = allusers[i].password
            document.getElementById("emailaddress").value = allusers[i].emailaddress
            document.getElementById("dob").value = allusers[i].dob
            document.getElementById("month").value = allusers[i].month
            document.getElementById("year").value = allusers[i].year
            document.getElementById("height").value = allusers[i].height
            document.getElementById("weight").value = allusers[i].weight
            document.getElementById("userEnter").style.display = "none"
            document.getElementById("userUpdate").style.display = "block"
        }
        function deleteUser(i) {
            console.log("Delete User called"+i)
            allusers.splice(i, 1)
            displayusers(allusers)
        }
        displayusers(allusers);

        function validate(){
            var user = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                emailaddress: document.getElementById("emailaddress").value,                
                dob: document.getElementById("dob").value, 
                month: document.getElementById("month").value,
                year: document.getElementById("year").value, 
                height: document.getElementById("height").value, 
                weight: document.getElementById("weight").value,
            }
            var check = false;
            for(a in user){
                if(user [a] == ""){
                    check = true
                }
            }
            if(check == true){
                document.getElementById("userEnter").setAttribute("disabled", true);
            }else{
                document.getElementById("userEnter").removeAttribute("disabled")
            }
        }
        function updateUser(){
            console.log("Update User Called")
            var user = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                emailaddress: document.getElementById("emailaddress").value,
                dob: document.getElementById("dob").value, 
                month: document.getElementById("month").value,
                year: document.getElementById("year").value, 
                height: document.getElementById("height").value, 
                weight: document.getElementById("weight").value,
            }
                localStorage.setItem("allusers", JSON.stringify(allusers))
                displayusers(allusers);
                Clearform();

                document.getElementById("userEnter").style.display = "block"
                document.getElementById("userUpdate").style.display = "none"
        }
    </script>
</body>

</html> 
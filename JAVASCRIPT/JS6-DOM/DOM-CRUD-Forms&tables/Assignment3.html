<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div#con {
            background-color: lightgoldenrodyellow;
        }

        .sai {
            border: 2px solid;
            width: 310px;
            margin-left: 500px;
            background-color: whitesmoke;
        }

        form {
            margin: 10px;
        }

        th {
            color: red;
            background-color: yellow;
        }

        td {
            color: blue;
            background-color: lightblue;
            text-align: center;
        }

        table {
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div id="con">
        <div class="sai">
            <form action="">
                <label for="Username">Username</label><br>
                <input type="text" name="Username" id="Username" onkeyup="validate()"> <br><br>

                <label for="Password">Password</label><br>
                <input type="text" placeholder="Password" name="Password" id="Password" onkeyup="validate()"> <br><br>

                <label for="">Email address</label><br>
                <input type="text" placeholder="Email address" name="Emailaddress" id="Emailaddress" onkeyup="validate()"><br><br>
                <select name="" id="">
                    <option value="">I am a man</option>
                    <option value="">I am a girl</option>
                </select><br><br>
                <select name="" id="">
                    <option value="">I want to find Women</option>
                    <option value="">I want to find men</option>
                </select><br><br>

                <label for="Date of birth"><b>Date of birth</b></label><br><br>
                <select name="" id="yearOfbirth" onkeyup="validate()">
                    <option value="">Year</option>
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                    <option value="2018">2018</option>
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                </select>
                <select name="" id="monthOfBirth" onkeyup="validate()">
                    <option value="">MONTH</option>
                    <option value="jan">jan</option>
                    <option value="feb">feb</option>
                    <option value="mar">mar</option>
                    <option value="april">april</option>
                    <option value="may">may</option>
                    <option value="june">june</option>
                    <option value="july">july</option>
                    <option value="aug">aug</option>
                    <option value="sep">sep</option>
                    <option value="oct">oct</option>
                    <option value="nov">nov</option>
                    <option value="dec">dec</option>
                </select>
                <select name="" id="dob" onkeyup="validate()">
                   
                   
                </select><br><br>
                <label for=""><b>Height / Weight</b></label><br><br>
                <select name="HeightWeight" id="HeightWeight">
                    <option value="">Height</option>
                    <option value="">1.0m</option>
                    <option value="">2.0m</option>
                    <option value="">3.0m</option>
                    <option value="">4.0m</option>
                    <option value="">5.0m</option>

                </select>
                <select name="HeightWeight" id="HeightWeight">
                    <option value="">Weight</option>
                    <option value="">20kg</option>
                    <option value="">30kg</option>
                    <option value="">40kg</option>
                    <option value="">50kg</option>
                    <option value="">60kg</option>
                </select>

                <button type="button" id="sai" onclick="display()" disabled>Enter</button>
                <button type="button" id="updateuser" onclick="updateusers()" style="display: none">updateuser</button>


            </form>
        </div>
    </div><br><br>
    <table border="1" style="width: 60%">
        <tr>
            <thead>
                <th>Username</th>
                <th>Password</th>
                <th>Email address</th>
                <th>dateOfBirth</th>
                <th>Edit</th>
                <th>Delete</th>
            </thead>
        </tr>
        <tbody>

        </tbody>
    </table>
    <script>
        let i =1 ;
        while(i<=31){
            var opt = document.createElement("option")
            opt.innerHTML = i
            opt.setAttribute("value",i);
            document.getElementById("dob").appendChild(opt)
            i++
        }
        allusers = JSON.parse(localStorage.getItem("allusers"))
        var index = null
        if (allusers == null) {
            allusers = []
        }

        function display() {
            var users = {
                Username: document.getElementById("Username").value,
                Password: document.getElementById("Password").value,
                Emailaddress: document.getElementById("Emailaddress").value,

            }

            var dateOfBirth = document.getElementById("dob").value;
            var yearOfBirth= document.getElementById("yearOfbirth").value
            var monthOfBirth = document.getElementById("monthOfBirth").value
            users.dob = dateOfBirth+"/"+yearOfBirth+"/"+monthOfBirth

            allusers.push(users)
            localStorage.setItem("allusers", JSON.stringify(allusers))
            console.log(users)
            console.log(allusers)
            document.getElementById("sai").setAttribute("disabled",true)
            displayusers()
            Clearform(users)
        }

        function Clearform(users) {
            for (a in users) {
                document.getElementById(a).value = ""
            }
        }

        function displayusers() {
            document.querySelector('tbody').innerHTML = ""

            allusers.forEach((users, i) => {

                var mytr = document.createElement('tr')
                document.querySelector('tbody').appendChild(mytr)
                for (a in users) {
                    var mytd = document.createElement('td')
                    mytd.innerHTML = users[a]
                    mytr.appendChild(mytd)

                }
                var edittd = document.createElement('td')
                var editBtn = document.createElement('button')
                mytr.appendChild(edittd)
                edittd.appendChild(editBtn)
                editBtn.innerHTML = "Edit"
                editBtn.setAttribute("onclick", "Edituser(" + i + ")")

                var Deletetd = document.createElement('td')
                var Deletebtn = document.createElement('button')
                mytr.appendChild(Deletetd)
                Deletetd.appendChild(Deletebtn)
                Deletebtn.innerHTML = "Delete"
                Deletebtn.setAttribute("onclick", "Deleteuser(" + i + ")")
            })
        }

        function Edituser(i) {
            console.log(allusers[i])
            index=i
            document.getElementById("Username").value = allusers[i].Username 
            document.getElementById("Password").value  = allusers[i].Password
            document.getElementById("Emailaddress").value  = allusers[i].Emailaddress
            document.getElementById("sai").style.display="none"
            document.getElementById("updateuser").style.display="block"

        }

        function Deleteuser(i) {
            // console.log("Delete user called"+i)
            allusers.splice(i, 1)
            displayusers()
        }
        displayusers()

        function validate(){
            var users = {
                Username: document.getElementById("Username").value,
                Password: document.getElementById("Password").value,
                Emailaddress: document.getElementById("Emailaddress").value,
                

            }
            

            var cheak=false;
            for( a in users){
                if(users[a]==""){
                    cheak=true
                }
            }
            if(cheak == true){
              document.getElementById("sai").setAttribute("disabled",true)
            }else{
                document.getElementById("sai").removeAttribute("disabled")
            }
        }

        function updateusers(){
            console .log("updatebuser called")
            var users = {
                Username: document.getElementById("Username").value,
                Password: document.getElementById("Password").value,
                Emailaddress: document.getElementById("Emailaddress").value,                

            }
            var dateOfBirth = document.getElementById("dob").value;
            var yearOfBirth= document.getElementById("yearOfbirth").value
            var monthOfBirth = document.getElementById("monthOfBirth").value
            users.dob = dateOfBirth+"/"+yearOfBirth+"/"+monthOfBirth
            allusers [index]=users

            localStorage.setItem("allusers", JSON.stringify(allusers))
            displayusers()
            Clearform(users)

            document.getElementById("sai").style.display="block"
            document.getElementById("updateuser").style.display="none"
        }
    </script>
</body>

</html>
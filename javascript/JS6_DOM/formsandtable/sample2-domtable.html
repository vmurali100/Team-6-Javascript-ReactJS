<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<style>
    
    form{
        color: red;  line-height: 25px;
    }
    input{
        display: block;
    }
    table{
        width: 100%; border: 1px solid ; font-family: Arial,  sans-serif;
    }
    tr,th{
        border: 1px solid green;
        text-align: center;
        color: blue;
    }
  

</style>
</head>
<body>
<form action="">
    <label for="entername">Name</label>
    <input type="text" name="" id="name" onkeyup="validate()">
    <label for="password">Password</label>
    <input type="password" name="" id="password" onkeyup="validate()">
    <label for="confirmpassword">ConfirmPassword</label>
    <input type="text" name="" id="confirmpassword" onkeyup="validate()">
    <label for="contactno">Contactno</label>
    <input type="number" name="" id="contactno" onkeyup="validate()">
    <label for="Email">EmailAddress</label>
    <input type="email" name="" id="email" onkeyup="validate()"><br>
    <label for="dateofbirth">DateofBirth</label><br>
    <select name="" id="dob" onkeyup="validate()">
    <option value="Date">Date</option>
    </select>
    <select name="" id="mob" onkeyup="validate()">
        
     <option value="Month">Month</option>
    <option value="January">January</option>
    <option value="February">February</option>
    <option value="March">March</option>
    <option value="April">April</option>
    <option value="May">May</option>
    <option value="June">June</option>
    <option value="July">July</option>
    <option value="august">august</option>
    
    </select>
    <select name="year" id="yob" onkeyup="validate()">
    
    <option value="Year">Year</option>
    <option value="2001">2001</option>
    <option value="2002">2002</option>
    <option value="2003">2003</option>
    <option value="2004">2004</option>
    <option value="2005">2005</option>
    <option value="2006">2006</option>
    <option value="2007">2007</option>
    <option value="2008">2008</option>
    </select>
    <button type="button" id="adding" onclick="addusers()" disabled>Adduser</button>
    
    <button type="button" id="updateuser" onclick="updateusers()" style="display:none">UpdateUser</button>
</form>
<table border="1">
    <thead>
    <tr>
        <th>Name</th>
        <th>Password</th>
        <th>Confirmpassword</th>
        <th>Contactno</th>
        <th>EmailAddress</th>
        <th>Dateofbirth</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
</thead>
   <tbody></tbody>
</table>
<script>
     let i=0;
    while(i<31){
        var opt=document.createElement("option");
        opt.innerHTML=i
        opt.setAttribute("value",i);
        document.getElementById("dob").appendChild(opt)
        i++
    }

    var allUsers=JSON.parse(localStorage.getItem("allUsers"))

    var index = null

    if(allUsers==null){
        allUsers=[]
    }
    function addusers(){
        var user={
            name:document.getElementById("name").value,
           password:document.getElementById("password").value,
           confirmpassword:document.getElementById("confirmpassword").value,
           contactno:document.getElementById("contactno").value,
            email:document.getElementById("email").value,
        }
        
        var dob=document.getElementById("dob").value;
        var mob=document.getElementById("mob").value;
        var yob=document.getElementById("yob").value;
        user.dob= dob +"/"+mob+"/"+yob
        
        allUsers.push(user);
       // console.log(allUsers);
       // console.log(user);
       localStorage.setItem("allUsers",JSON.stringify(allUsers))
       displayUser(allUsers);
       clearform();
    }
    function clearform(){
        document.getElementById("name").value="";
        document.getElementById("password").value="";
        document.getElementById("confirmpassword").value="";
        document.getElementById("contactno").value="";
        document.getElementById("email").value="";
        
        document.getElementById("dob").value="";
        document.getElementById("mob").value="";
       document.getElementById("yob").value="";
    }
   function displayUser(data){
   document.querySelector("tbody").innerHTML=" ";
    data.forEach((user,i) => {
       var myTr=document.createElement("tr"); 
       for(a in user){
        var myTd=document.createElement("td");
        myTd.innerHTML=user [a]
        myTr.appendChild(myTd)
       }

       var editTd=document.createElement("td");
       var editBtn=document.createElement("button");
       editBtn.setAttribute("onclick","editUser("+i+")");
       editBtn.innerHTML="Edit"
       editTd.appendChild(editBtn);
       myTr.appendChild(editTd);

       var deleteTd=document.createElement("td");
       var deleteBtn=document.createElement("button");
       deleteBtn.setAttribute("onclick","deleteUser("+i+")");
       deleteBtn.innerHTML="Delete"
       deleteTd.appendChild(deleteBtn);
       myTr.appendChild(deleteTd);
       
       document.querySelector("tbody").appendChild(myTr);

    });
   }

    function editUser(i){
        console.log(allUsers[i]);
        index = i
        document.getElementById("name").value=allUsers[i].name
        document.getElementById("password").value=allUsers[i].password
        document.getElementById("confirmpassword").value=allUsers[i].confirmpassword
        document.getElementById("contactno").value=allUsers[i].contactno
         document.getElementById("email").value=allUsers[i].email

         
        document.getElementById("dob").value=allUsers[i].dob
        document.getElementById("mob").value=allUsers[i].mob
       document.getElementById("yob").value=allUsers[i].yob
         
         document.getElementById("adding").style.display="none"
        
        document.getElementById("updateuser").style.display="block"
         
    }

    function deleteUser(i){
        console.log("Delete user called"+i);
        allUsers.splice(i,1);
        displayUser(allUsers);
    }
    displayUser(allUsers)

    function validate(){
        var user={
            name:document.getElementById("name").value,
           password:document.getElementById("password").value,
           confirmpassword:document.getElementById("confirmpassword").value,
           contactno:document.getElementById("contactno").value,
            email:document.getElementById("email").value,

            
      dob:document.getElementById("dob").value,
        mob:document.getElementById("mob").value,
       yob:document.getElementById("yob").value
        }
        var check =false;
        for(a in user){
            if(user[a] ==""){
                check = true
            }
        }
        if(check==true){
        document.getElementById("adding").setAttribute("disabled",true);
    }else{
        document.getElementById("adding").removeAttribute("disabled");
    }
    }
    function updateusers(){
        console.log("update user called")
        var user={
            name:document.getElementById("name").value,
           password:document.getElementById("password").value,
           confirmpassword:document.getElementById("confirmpassword").value,
           contactno:document.getElementById("contactno").value,
            email:document.getElementById("email").value,

            
      dob:document.getElementById("dob").value,
        mob:document.getElementById("mob").value,
       yob:document.getElementById("yob").value
        };
        allUsers[index] = user
        localStorage.setItem("allUsers",JSON.stringify(allUsers))
       displayUser(allUsers);
       clearform();
       
       document.getElementById("adding").style.display="block"
        
        document.getElementById("updateuser").style.display="none"
    }
   
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
</head>
<body>
    <div class="conntainer">
        <table class="table">
            <thead>
              <tr>
                <th >userid</th>
                <th>id</th>
                <th >title</th>
                <th >completed</th>
               
              </tr>
            </thead>
            <tbody>
             
            </tbody>
          </table>
    </div>
    <script>
         var alltodos=JSON.parse(localStorage.getItem("alltodos"))
        if(alltodos==null){
            getallusersfromserver()
        }else{
            displaytodos(alltodos)
        }
         function getallusersfromserver(){
            var getdata= new XMLHttpRequest();

            getdata.onreadystatechange=function(){
                if(getdata.status ==200 && getdata.readyState ==4){

                    alltodos=JSON.parse(getdata.response)
                    console.log("alltodos",alltodos)
                    localStorage.setItem("alltodos",JSON.stringify(alltodos))
                    console.log(alltodos)
                    displaytodos(alltodos)
                }
            }
            getdata.open("GET","https://jsonplaceholder.typicode.com/todos")
            getdata.send()
        }
        // getallusersfromserver()
        function displaytodos(alltodos){
            alltodos.forEach((todos,i)=>  {
            var mytr=document.createElement("tr")
            for(a in todos){
                var mytd=document.createElement("td")
                mytd.innerHTML=todos[a]
                mytr.appendChild(mytd)
            }
            var edittd=document.createElement("td")
                var editbtn=document.createElement("button")
                editbtn.setAttribute("onclick","edittodos("+i+")")
                editbtn.setAttribute("class","btn btn-warning")
                editbtn.innerHTML="Edit";
                edittd.appendChild(editbtn)
                mytr.appendChild(edittd)

                var deletetd=document.createElement("td")
                var deletebtn=document.createElement("button")
                deletebtn.setAttribute("onclick","deletetodos("+i+")")
                deletebtn.setAttribute("class","btn btn-danger")
                deletebtn.innerHTML="Delete";
                deletetd.appendChild(deletebtn)
                mytr.appendChild(deletetd)
                
            document.querySelector("tbody").appendChild(mytr)

        
        });

        }
         
    
        function edittodos(i){
            window.location.href="edit3.html?"+i
        }
        function deletetodos(i){

        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        td {
            color: blue;
            background-color: rgb(195, 167, 157);
        }

        th {
            color: red;
            background-color: yellow;
        }

        form {
            background-color: aqua;
        }

        div#sai {
            width: 695px;
        }
    </style>
</head>

<body>
    <div id="sai">
        <form action="">
            <fieldset>
                <legend>Registration Details</legend>

                <label for="">University :</label>
                <input type="text" name="" id="University" onkeyup="validate()"><br><br>

                <label for=""> Institute :</label>
                <input type="text" name="" id="Institute" onkeyup="validate()"><br><br>

                <label for="">Branch</label>
                <input type="text" name="" id="Branch" onkeyup="validate()"><br><br>

                <label for="">Deegre</label>
                <input type="text" name="" id="Deegre" onkeyup="validate()">
                <input type="radio" name="" id="" onkeyup="validate()"> Pursuing
                <input type="radio" name="" id="" onkeyup="validate()"> Completed <br><br>

                <label for="">Average CPI :</label>
                <input type="text" name="" id="AverageCPI" onkeyup="validate()">

                <label for=""> Experirnce :</label>
                <input type="text" name="" id="Experirnce" onkeyup="validate()"><br><br>

                <label for=""> Your Website Or Blog :</label>
                <input type="text" name="" id="Website" placeholder="http://" onkeyup="validate()" > <br><br>

                <button type="button" id="saikiran" onclick="CreateUser()" disabled>Submit</button>
                <button type="button" id="updateuser" onclick="updateusers()" style="display: none">updateuser</button>

            </fieldset>
        </form>
    </div>
    <br><br><br>
    <table border="1" style="width: 50%">
        <thead>
            <tr>
                <th>University</th>
                <th>Institute</th>
                <th>Branch</th>
                <th>Deegre</th>
                <th>AverageCPI</th>
                <th>Experirnce</th>
                <th>Website</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table><br><br>
    <script>
        allUsers = JSON.parse(localStorage.getItem("allUsers"))
        var index = null
        if (allUsers == null) {
            allUsers = []
        }

        function CreateUser() {
            var users = {
                University: document.getElementById("University").value,
                Institute: document.getElementById("Institute").value,
                Branch: document.getElementById("Branch").value,
                Deegre: document.getElementById("Deegre").value,
                AverageCPI: document.getElementById("AverageCPI").value,
                Experirnce: document.getElementById("Experirnce").value,
                Website: document.getElementById("Website").value

            }
            allUsers.push(users)
            console.log(users)
            document.getElementById("sai").setAttribute("disabled", true)
            localStorage.setItem("allUsers", JSON.stringify(allUsers))
            displayusers()
            Clearform(users)
        }

        function Clearform(users) {
            for (a in users) {
                document.getElementById(a).value = ""
            }
        }

        function displayusers() {
            document.querySelector('tbody').innerHTML = ""
            allUsers.forEach((users, i) => {
                var mytr = document.createElement('tr')
                document.querySelector('tbody').appendChild(mytr)

                for (a in users) {
                    var mytd = document.createElement('td')
                    mytr.appendChild(mytd)
                    mytd.innerHTML = users[a]
                }
                var editTd = document.createElement('td')
                var editBtn = document.createElement('button')
                mytr.appendChild(editTd)
                editTd.appendChild(editBtn)
                editBtn.innerHTML = 'Edit'
                editBtn.setAttribute("onclick", "EditUser(" + i + ")")

                var DeleteTd = document.createElement('td')
                var DeleteBtn = document.createElement('button')
                mytr.appendChild(DeleteTd)
                DeleteTd.appendChild(DeleteBtn)
                DeleteBtn.innerHTML = 'Delete'
                DeleteBtn.setAttribute("onclick", "DeleteUser(" + i + ")")
            })
        }
        displayusers()

        function EditUser(i) {
            console.log(allUsers[i])
            index = i
            document.getElementById("University").value = allUsers[i].University,
            document.getElementById("Institute").value = allUsers[i].Institute
            document.getElementById("Branch").value = allUsers[i].Branch
            document.getElementById("Deegre").value = allUsers[i].Deegre
            document.getElementById("AverageCPI").value = allUsers[i].AverageCPI
            document.getElementById("Experirnce").value = allUsers[i].Experirnce
            document.getElementById("Website").value = allUsers[i].Website
            document.getElementById("saikiran").style.display="none"
            document.getElementById("updateuser").style.display="block"


        }
        function DeleteUser(i) {
            // console.log("delete user Called"+i)
            allUsers.splice(i, 1)
            displayusers()

        }
        displayusers()

        function validate() {
            var users = {
                University: document.getElementById("University").value,
                Institute: document.getElementById("Institute").value,
                Branch: document.getElementById("Branch").value,
                Deegre: document.getElementById("Deegre").value,
                AverageCPI: document.getElementById("AverageCPI").value,
                Experirnce: document.getElementById("Experirnce").value,
                Website: document.getElementById("Website").value

            }
            var cheak = false;
            for (a in users) {
                if (users[a] == "") {
                    cheak = true
                }
            }
            if (cheak == true) {
                document.getElementById("saikiran").setAttribute("disabled", true)
            } else
                document.getElementById("saikiran").removeAttribute("disabled")
        }

         function updateusers(){
             console.log("update user called")
             var users = {
                University: document.getElementById("University").value,
                Institute: document.getElementById("Institute").value,
                Branch: document.getElementById("Branch").value,
                Deegre: document.getElementById("Deegre").value,
                AverageCPI: document.getElementById("AverageCPI").value,
                Experirnce: document.getElementById("Experirnce").value,
                Website: document.getElementById("Website").value

            }
            allUsers[index]=users

            localStorage.setItem("allUsers", JSON.stringify(allUsers))
            displayusers()
            Clearform(users)
            document.getElementById("saikiran").style.display="block"
            document.getElementById("updateuser").style.display="none"
         }
    </script>
</body>

</html>